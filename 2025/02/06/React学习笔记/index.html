<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>React学习笔记 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1.React介绍React 是一个用于构建用户界面的JavaScript库，它允许开发者以声明式的方式创建交互丰富的Web应用。React不是一个完整的框架，而是专注于构建组件化的UI层。它可以与其他库或框架（如Redux或Angular）配合使用，以构建复杂的应用程序。 2.React创建环境（以Vite为例）在Node环境下输入 1npm create vite@latest my-vite">
<meta property="og:type" content="article">
<meta property="og:title" content="React学习笔记">
<meta property="og:url" content="http://example.com/2025/02/06/React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="1.React介绍React 是一个用于构建用户界面的JavaScript库，它允许开发者以声明式的方式创建交互丰富的Web应用。React不是一个完整的框架，而是专注于构建组件化的UI层。它可以与其他库或框架（如Redux或Angular）配合使用，以构建复杂的应用程序。 2.React创建环境（以Vite为例）在Node环境下输入 1npm create vite@latest my-vite">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s21.ax1x.com/2025/01/19/pEkBICq.png">
<meta property="og:image" content="https://s21.ax1x.com/2025/03/01/pE8R458.png">
<meta property="og:image" content="https://s21.ax1x.com/2025/01/22/pEAsEzq.png">
<meta property="og:image" content="https://s21.ax1x.com/2025/01/24/pEEuD1I.png">
<meta property="og:image" content="https://s21.ax1x.com/2025/02/05/pEelZ6J.png">
<meta property="og:image" content="https://s21.ax1x.com/2025/02/10/pEnJsw4.png">
<meta property="article:published_time" content="2025-02-06T07:59:34.000Z">
<meta property="article:modified_time" content="2025-04-01T13:25:01.329Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s21.ax1x.com/2025/01/19/pEkBICq.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-React学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/06/React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2025-02-06T07:59:34.000Z" itemprop="datePublished">2025-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      React学习笔记
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-React介绍"><a href="#1-React介绍" class="headerlink" title="1.React介绍"></a>1.React介绍</h1><p><strong>React</strong> 是一个用于构建用户界面的JavaScript库，它允许开发者以声明式的方式创建交互丰富的Web应用。React不是一个完整的框架，而是专注于构建组件化的UI层。它可以与其他库或框架（如Redux或Angular）配合使用，以构建复杂的应用程序。</p>
<h1 id="2-React创建环境（以Vite为例）"><a href="#2-React创建环境（以Vite为例）" class="headerlink" title="2.React创建环境（以Vite为例）"></a>2.React创建环境（以Vite为例）</h1><p>在Node环境下输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest my-vite-app </span><br></pre></td></tr></table></figure>

<p>按要求选择React+JavaScript配置</p>
<p><strong>文件目录</strong></p>
<table>
<thead>
<tr>
<th>文件名</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>package.json</td>
<td>核心包，包含核心依赖和关键命令</td>
</tr>
<tr>
<td>.src</td>
<td>存放项目的源代码。</td>
</tr>
<tr>
<td>.src&#x2F;index.js</td>
<td>项目入口文件</td>
</tr>
<tr>
<td>.src&#x2F;App.js</td>
<td>项目根组件</td>
</tr>
</tbody></table>
<p>.&#x2F;src&#x2F;main.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/main.jsx项目入口 从这里开始运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//React项目核心导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRoot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span></span><br><span class="line"><span class="comment">//导入项目根组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.jsx&#x27;</span></span><br><span class="line"><span class="comment">//把App根组件渲染到id为&#x27;root&#x27;的节点</span></span><br><span class="line"><span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)).<span class="title function_">render</span>(  </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>.&#x2F;src&#x2F;App.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//项目的根组件</span></span><br><span class="line"><span class="comment">// App -&gt; index.js -&gt; index.html(root)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        This is an App. </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="3-JSX基础"><a href="#3-JSX基础" class="headerlink" title="3.JSX基础"></a>3.JSX基础</h1><h2 id="JSX理论"><a href="#JSX理论" class="headerlink" title="JSX理论"></a>JSX理论</h2><p><strong>概念：</strong> <strong>JSX</strong>是<em>JavaScript</em>和<em>XML</em>的缩写，表示<strong>JS代码中编写HTML模板结构</strong>，是React中编写UI模板的方法。</p>
<p><strong>本质：</strong> <strong>JSX</strong>本质是对JS的语法扩展，需要借助<em>Babel</em>编译转化成正常的JS。</p>
<h2 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h2><h3 id="JSX使用JS表达式"><a href="#JSX使用JS表达式" class="headerlink" title="JSX使用JS表达式"></a>JSX使用JS表达式</h3><p>使用<code>&#123;&#125;</code>传递表达式</p>
<p><strong>1.传递字符串</strong></p>
<p><strong>2.传递JavaScript变量&#x2F;对象&#x2F;函数&#x2F;方法</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        This is an App. </span></span><br><span class="line"><span class="language-xml">        &#123;&#x27;This is a message&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* 传字符串 */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;count&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* 传JavaScript变量 */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;getName()&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* 传函数调用 */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;new Date().getDate()&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* 传方法调用 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span>&quot;<span class="attr">red</span>&quot;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;/* 传js对象 */&#125;</span></span><br><span class="line"><span class="language-xml">          This is a red div.</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：if、Switch、变量声明属于语句而非表达式，因此不能出现在<code>&#123;&#125;</code>中。</strong></p>
<h3 id="JSX实现列表渲染"><a href="#JSX实现列表渲染" class="headerlink" title="JSX实现列表渲染"></a>JSX实现列表渲染</h3><p><strong>语法：</strong> 在JSX中可以使用原生JS中的<em>map方法</em>渲染遍历列表</p>
<p><strong><code>&#123;targetList.map(item=&gt; &lt;dom key=&#123;item.key&#125;&gt; &lt;/dom&gt;)&#125;</code></strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list =[&#123;<span class="attr">id</span>:<span class="number">101</span>,<span class="attr">name</span>:<span class="string">&#x27;Vue&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="number">102</span>,<span class="attr">name</span>:<span class="string">&#x27;React&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="number">103</span>,<span class="attr">name</span>:<span class="string">&#x27;Angular&#x27;</span>&#125;,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;list.map(item =&gt; <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：对应的DOM标签上必须绑定一个独一无二的key值，可以是字符串或number，常用id绑定</strong></p>
<h3 id="JSX中实现条件渲染"><a href="#JSX中实现条件渲染" class="headerlink" title="JSX中实现条件渲染"></a>JSX中实现条件渲染</h3><p><strong>语法：</strong> 逻辑运算符 <strong><code>&amp;&amp;</code></strong> 或三元表达式 <strong><code>?:</code></strong> 实现条件渲染。</p>
<p><strong><code>&#123;flag &amp;&amp; &lt;DOM&gt;&lt;/DOM&gt;&#125;</code></strong></p>
<p><strong><code>&#123;flag ? &lt;DOM&gt;A&lt;/DOM&gt; : &lt;DOM&gt;B&lt;/DOM&gt;&#125;</code></strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isLogin = <span class="literal">false</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;isLogin &amp;&amp; <span class="tag">&lt;<span class="name">span</span>&gt;</span>This is a span.<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">          &#123;isLogin ? <span class="tag">&lt;<span class="name">span</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">span</span>&gt;</span>:<span class="tag">&lt;<span class="name">span</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>对于复杂情况，可构造核心函数，根据不同类型返回不同的JSX模板</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> articleType = <span class="number">3</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getArticleTem</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (articleType === <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No image<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(articleType === <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Single image<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Triple Image<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="title function_">getArticleTem</span>()&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-React事件与组件"><a href="#4-React事件与组件" class="headerlink" title="4.React事件与组件"></a>4.React事件与组件</h1><h2 id="React事件"><a href="#React事件" class="headerlink" title="React事件"></a>React事件</h2><h3 id="React基础事件绑定"><a href="#React基础事件绑定" class="headerlink" title="React基础事件绑定"></a>React基础事件绑定</h3><p><strong>语法:</strong> <em><strong><code>&lt;DOM onEvent=&#123;function()&#125;&gt;&lt;/DOM&gt;</code></strong></em></p>
<p>例如</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;button被点击了&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用事件对象参数"><a href="#使用事件对象参数" class="headerlink" title="使用事件对象参数"></a>使用事件对象参数</h3><p><strong>语法:</strong> 在事件回调函数中设置形参 <strong><code>e</code></strong></p>
<p>注意在DOM中的格式  <code>&lt;DOM action=&#123;(e) =&gt; function(Args,e)&#125;&gt; &lt;/DOM&gt; </code></p>
<p>其中,事件对象<code>e</code> 是可选项。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params">name,e</span>) =&gt;&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;button被点击了&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> handleClick(&#x27;jack&#x27;),e&#125;&gt;Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="React组件"><a href="#React组件" class="headerlink" title="React组件"></a>React组件</h2><h3 id="React组件使用"><a href="#React组件使用" class="headerlink" title="React组件使用"></a>React组件使用</h3><p><strong>概念:</strong> 一个组件就是用户界面的一部分,可以有自己的逻辑和外观,组件之间可以互相嵌套和多次复用。</p>
<p>在React中，一个组件就是一个首字母大写的函数，内部存放了组件的逻辑和视图UI，渲染组件时，以标签的形式书写即可。</p>
<p><strong>创建组件的方法：</strong></p>
<p>1.定义组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.使用组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span>&gt;</span><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useState基础"><a href="#useState基础" class="headerlink" title="useState基础"></a>useState基础</h3><p>useState是一个React Hook,允许我们向组件中添加一个<strong>状态变量</strong>,从而控制影响组件的渲染结果</p>
<p>本质:和普通JS变量不同,状态变量一旦发生变化,组件的视图UI也会发生变化。<strong>（数据驱动视图）</strong></p>
<p>语法:<strong><code>const [Variable,setVariableFunction] = useState(initialValue)</code></strong></p>
<ol>
<li><p><strong>useState</strong>是一个函数，返回值是一个数组</p>
</li>
<li><p>数组中的第一个参数是状态变量，第二个参数是set函数，用来修改状态变量</p>
</li>
<li><p>useState的参数将作为count的初始量</p>
</li>
</ol>
<p><strong>注意:</strong> 1. 需要引用<code>import &#123; useState &#125; from &quot;react&quot;</code> </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">  &#125; </span><br><span class="line">    &lt;button onClick=&#123;handleClick&#125;&gt;&#123;count&#125;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p><strong>状态不可变</strong><br>在React中,状态被认为是只读的,因此始终要使用匹配的<code>setVariableFunction()</code> 来替换原状态变量，直接的修改状态并不能引发视图更新。</p>
</li>
<li><p><strong>修改对象状态</strong><br>对于对象类型的状态变量，应该始终要使用匹配的<code>setVariableFunction()</code> 来替换原状态对象。</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [form,setForm] = <span class="title function_">useState</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;jack&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">changeForm</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="title function_">setForm</span>(&#123;</span><br><span class="line">      ...form,</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&#x27;john&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;changeForm&#125;</span>&gt;</span>&#123;form.name&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>注:</em></p>
<p><strong>扩展运算符（Spread Operator）:”…”</strong></p>
<ul>
<li><p>用于数组或对象的展开。例如，在数组中：<br>JavaScript复制<br>   let arr1 &#x3D; [1, 2, 3];<br>   let arr2 &#x3D; [0, …arr1, 4];<br>这里“…arr1”将arr1数组中的元素1、2、3展开，最终arr2的值为[0, 1, 2, 3, 4]。它能够将一个数组的元素逐个添加到另一个数组中。</p>
</li>
<li><p>对于对象，可以用于复制对象的属性。例如：<br>JavaScript复制<br>   let obj1 &#x3D; {a: 1, b: 2};<br>   let obj2 &#x3D; {…obj1, c: 3};<br>“…obj1”将obj1对象的属性a和b复制到obj2中，obj2的结构为{a: 1, b: 2, c: 3}。它能够将一个对象的可枚举属性复制到另一个对象中。</p>
</li>
</ul>
<h3 id="组件样式控制"><a href="#组件样式控制" class="headerlink" title="组件样式控制"></a>组件样式控制</h3><ol>
<li><p>行内样式<br><code>&lt;DOM style=&#123;color:&#39;red&#39;&#125;&gt;&lt;/DOM&gt;</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.css</span></span><br><span class="line">.<span class="property">foo</span>&#123;</span><br><span class="line">    <span class="attr">color</span>:<span class="string">&quot;red&quot;</span>;</span><br><span class="line">    <span class="attr">fontSize</span>:<span class="string">&quot;50px&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//App.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">classname</span>=<span class="string">&#x27;foo&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>class类名控制<br><strong>语法:</strong> <code>&lt;DOM className=&quot;&quot;&gt;&lt;/DOM&gt;</code></li>
</ol>
</li>
</ol>
<p><em>注:</em> </p>
<ol>
<li><p>写行内样式时,CSS属性名要使用驼峰命名法.</p>
</li>
<li><p>需在App.js下引用对应的CSS文件.</p>
</li>
</ol>
<p><strong>classname优化类名控制</strong></p>
<ol>
<li><p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install classnames</span><br></pre></td></tr></table></figure>
</li>
<li><p>引用</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> classNames = <span class="built_in">require</span>(<span class="string">&#x27;classnames&#x27;</span>)</span><br><span class="line"><span class="comment">//ES6</span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span></span><br><span class="line"><span class="comment">//import</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用<br>语法:<code>classNames(&#39;objclassName1&#39;,&#39;2...&#39;,&#123;conditionalClassName:Condition&#125;)</code></li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span </span><br><span class="line">&#123;key=item.<span class="property">type</span>&#125;</span><br><span class="line">className=&#123;<span class="title function_">classNames</span>(<span class="string">&#x27;nav-item&#x27;</span>,&#123;<span class="attr">active</span>:type === item.<span class="property">type</span>&#125;)&#125;</span><br></pre></td></tr></table></figure>



<h3 id="受控表单绑定"><a href="#受控表单绑定" class="headerlink" title="受控表单绑定"></a>受控表单绑定</h3><p><strong>概念:</strong> 使用React组件的状态(useState)控制表单的状态,即双向绑定</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pEkBICq"><img src="https://s21.ax1x.com/2025/01/19/pEkBICq.png" alt="pEkBICq.png"></a></p>
<p><strong>步骤:</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [value,setValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// 1.准备一个React状态值</span></span><br><span class="line">&lt;input </span><br><span class="line">type=<span class="string">&quot;text&quot;</span></span><br><span class="line">value=&#123;value&#125;</span><br><span class="line"><span class="comment">// 2.通过value属性绑定React状态变量</span></span><br><span class="line">onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>)&#125;</span><br><span class="line"><span class="comment">// 3.绑定onChange事件 通过参数e拿到输入框的值 反向修改到React状态中</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="React中获取DOM"><a href="#React中获取DOM" class="headerlink" title="React中获取DOM"></a>React中获取DOM</h3><p><strong>概念:</strong> 在React组件中<strong>获取&#x2F;操作</strong> DOM,需要使用<strong>useRef</strong> 钩子函数,分为两步:</p>
<ol>
<li><p>使用useRef创建Ref对象,并与JSX绑定</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;inputRef&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在DOM可用时(组件渲染完毕),通过<code>inputRef.current</code>获取DOM对象</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(inputRef.<span class="property">current</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="React组件通信"><a href="#React组件通信" class="headerlink" title="React组件通信"></a>React组件通信</h2><h3 id="理解组件通信"><a href="#理解组件通信" class="headerlink" title="理解组件通信"></a>理解组件通信</h3><p><strong>概念:</strong> 组件通信就是<em>组件之间的数据传递</em>,根据组件嵌套关系的不同,有着不同的通信方法.</p>
<h4 id="父传子-基础实现"><a href="#父传子-基础实现" class="headerlink" title="父传子-基础实现"></a>父传子-基础实现</h4><p><strong>实现步骤:</strong> </p>
<ol>
<li><p>父组件传递数据,在子组件标签上绑定属性</p>
</li>
<li><p>子组件接收数据,子组件通过<strong>props参数</strong> 接收数据</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;This is app name.&#x27;</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="comment">// props:对象里面包含了父组件传递过来的所有数据</span></span><br><span class="line">    <span class="comment">// eslint-disable-next-line react/prop-types</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is son &#123;props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#123;<span class="comment">/* 父传子通信 */</span>&#125;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">Son</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="父传子-props"><a href="#父传子-props" class="headerlink" title="父传子-props"></a>父传子-props</h4><ol>
<li><p>props可传递任意的数据<br>数字、字符串、布尔值、数组、对象、函数、JSX</p>
</li>
<li><p>props是<strong>只读对象</strong><br>子组件<strong>只能读取props中的数据</strong>,不能直接进行修改,父组件的数据只能由父组件修改</p>
</li>
</ol>
<h4 id="父传子-props-children"><a href="#父传子-props-children" class="headerlink" title="父传子-props children"></a>父传子-props children</h4><p>场景:当我们把内容嵌套在子组件中时,父组件会自动在名为prop.children属性中接收内容</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="comment">// props:对象里面包含了父组件传递过来的所有数据</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(props)</span><br><span class="line">    <span class="comment">// eslint-disable-next-line react/prop-types</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is son &#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="父子组件通信-子传父"><a href="#父子组件通信-子传父" class="headerlink" title="父子组件通信-子传父"></a>父子组件通信-子传父</h4><p>核心思路:在子组件中调用父组件中的函数并传递数据</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">&#123;onGetMsg&#125;</span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> sonMsg = <span class="string">&quot;This is son msg.&quot;</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 在子组件中调用父组件的形参 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>onGetMsg(sonMsg)&#125;&gt;send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getMsg</span> = (<span class="params">msg</span>) =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Son</span> <span class="attr">onGetMsg</span>=<span class="string">&#123;getMsg&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用状态提升实现兄弟组件通信"><a href="#使用状态提升实现兄弟组件通信" class="headerlink" title="使用状态提升实现兄弟组件通信"></a>使用状态提升实现兄弟组件通信</h4><p><strong>实现思路:</strong> 借助<em>状态提升</em> 机制,通过父组件进行兄弟组件之间的数据传递</p>
<ol>
<li><p>A组件先通过子传父的方式把数据传给父组件App</p>
</li>
<li><p>App拿到数据后通过父传子的方式传递给B组件</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params">&#123; onGetAname &#125;</span>)&#123;</span><br><span class="line">  <span class="comment">// &#123;onGetAname&#125;是组件A的参数解构,意味着函数接受同名函数作为props在组件内调用</span></span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&#x27;This is A name&#x27;</span></span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is A component</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> onGetAname(name)&#125;&gt;Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params">&#123;name&#125;</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is B component.</span></span><br><span class="line"><span class="language-xml">      &#123;name&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name,setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getAname</span> = (<span class="params">name</span>) =&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br><span class="line">    <span class="title function_">setName</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    This is app.</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">A</span> <span class="attr">onGetAname</span>=<span class="string">&#123;getAname&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">B</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用Context机制跨层级组件通信"><a href="#使用Context机制跨层级组件通信" class="headerlink" title="使用Context机制跨层级组件通信"></a>使用Context机制跨层级组件通信</h4><p><strong>实现步骤:</strong> </p>
<ol>
<li><p>使用<strong>createContext</strong>方法创建上下文对象Ctx</p>
</li>
<li><p>在顶层组件(App)中通过<strong>Ctx.Provider</strong>组件提供数据</p>
</li>
<li><p>在底层组件中通过<strong>useContext</strong>钩子函数获取数据</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建上下文对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MsgContext</span> = <span class="title function_">createContext</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is A component</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">B</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 3.使用useContext钩子函数获取数据</span></span><br><span class="line">  <span class="keyword">const</span> msg = <span class="title function_">useContext</span>(<span class="title class_">MsgContext</span>)</span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is B component.</span></span><br><span class="line"><span class="language-xml">      &#123;msg&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="keyword">const</span> msg = <span class="string">&quot;This is app msg.&quot;</span></span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;/* 2. 在顶层创建Ctx.Provider组件 */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">MsgContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;msg&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">A</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">MsgContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    This is app.</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><h4 id="useEffect的使用"><a href="#useEffect的使用" class="headerlink" title="useEffect的使用"></a>useEffect的使用</h4><p>useEffect是一个React Hook函数,用于在React组件中创建<em>不是由于事件引起</em>而是<strong>渲染本身引起的操作</strong> ,例如<em>发送AJAX请求,更改DOM</em></p>
<p><strong>需求:</strong> 在组件渲染完毕后,立刻从服务器获取频道数据并显示到页面上</p>
<p><strong>语法:</strong></p>
<p><code>useEffect(() = &#123;Function()&#125;,[Array])</code></p>
<p>参数1为<strong>副作用函数</strong> ,在函数内放置要执行的操作</p>
<p>参数2为数组(<em>可选</em>),数组内的依赖项会影响第一个参数函数的执行,若为空,<strong>副作用函数只会在组件渲染完毕后执行一次</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = <span class="string">&quot;http://geek.itheima.net/v1_0/channels&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [list,setList] = <span class="title function_">useState</span>([])</span><br><span class="line"> <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//  获取频道列表</span></span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getList</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>)</span><br><span class="line">  <span class="keyword">const</span> jsonRes = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(jsonRes)</span><br><span class="line">  <span class="title function_">setList</span>(jsonRes.<span class="property">data</span>.<span class="property">channels</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="title function_">getList</span>()</span><br><span class="line"> &#125;,[])</span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;list.map(item =&gt; <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="useEffect依赖项参数"><a href="#useEffect依赖项参数" class="headerlink" title="useEffect依赖项参数"></a>useEffect依赖项参数</h4><table>
<thead>
<tr>
<th>依赖项</th>
<th>副作用函数执行时机</th>
</tr>
</thead>
<tbody><tr>
<td>没有依赖项</td>
<td>组件初始渲染+组件更新时执行</td>
</tr>
<tr>
<td>空数组依赖</td>
<td>只在初始渲染时执行一次</td>
</tr>
<tr>
<td>添加特定依赖项</td>
<td>组件初始渲染+特性依赖项变化时执行</td>
</tr>
</tbody></table>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 无依赖项 初始+组件更新</span></span><br><span class="line">  <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;副作用函数执行了&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 空数组依赖 仅在初始时执行一次</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;空数组依赖&#x27;</span>)</span><br><span class="line">  &#125;,[])</span><br><span class="line">  <span class="comment">// 传入特定依赖项 初始 + 依赖项变化时执行</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;含依赖项&#x27;</span>)</span><br><span class="line">  &#125;,[count])</span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span> setCount(count+1)&#125;&gt;&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useEffect-清除副作用"><a href="#useEffect-清除副作用" class="headerlink" title="useEffect-清除副作用"></a>useEffect-清除副作用</h4><p>在useEffect中编写的副作用操作,想在组件卸载时再清理掉,该过程即为<strong>清理副作用</strong></p>
<p><strong>语法:</strong> </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//实现副作用的操作</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//清除副作用逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定时器执行中&#x27;</span>)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">// 清除副作用</span></span><br><span class="line">      <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>This is son<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [show,setShow] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;show &amp;&amp; <span class="tag">&lt;<span class="name">Son</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setShow(false)&#125;&gt;卸载Son组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="其他useHooks函数"><a href="#其他useHooks函数" class="headerlink" title="其他useHooks函数"></a>其他useHooks函数</h3><h4 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h4><p><strong>作用：</strong> 和useState类似，用于管理相对复杂的状态数据，对于需要复杂操作的状态变量，该函数比<code>useState</code>更具优势。</p>
<p><strong>语法：</strong></p>
<p>reducer函数：<code>reducer(state,action)</code></p>
<p>管理状态变量：<code>switch(action.type)&#123;case:...&#125;</code></p>
<p>调起useHooks方法 注册状态变量：<code>const [state,dispatch] = useReducer(reducer,defaultValue)</code></p>
<p>使用dispatch方法操作状态变量：<code>dispatch(&#123;type:&#39;ACTION&#39;&#125;)</code></p>
<h6 id="useReducer-基础用法"><a href="#useReducer-基础用法" class="headerlink" title="useReducer-基础用法"></a>useReducer-基础用法</h6><ol>
<li><p>定义一个reducer函数（<em>根据不同的action返回不同的状态</em>）</p>
</li>
<li><p>在组件中调用useReducer，并传入reducer函数和状态的初始值</p>
</li>
<li><p>事件发生时，通过dispatch函数分派一个action对象（通知reducer要返回哪个新状态并渲染UI）</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 1.定义reducer函数，根据不同的action返回不同的状态</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state,action</span>)&#123;</span><br><span class="line">  <span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;INC&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;DEC&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state - <span class="number">1</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.组件中调用useReducer(reducer,0) =&gt;[state,dispatch]</span></span><br><span class="line">  <span class="keyword">const</span> [state,dispatch] = <span class="title function_">useReducer</span>(reducer,<span class="number">0</span>)</span><br><span class="line">  <span class="comment">// 3.调用dispa tch(&#123;type:&#x27;INC&#x27;&#125;) =&gt;通知reducer产生新的状态来更新UI</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;dispatch(&#123; type:&#x27;INC&#x27; &#125;)&#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          count is &#123;state&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;dispatch(&#123; type:&#x27;DEC&#x27; &#125;)&#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          count is &#123;state&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="useReducer-分派action时传参"><a href="#useReducer-分派action时传参" class="headerlink" title="useReducer-分派action时传参"></a>useReducer-分派action时传参</h5><p>在<code>dispatch(&#123;...,payload:value&#125;)</code>中传参时，需要在<code>reducer</code>函数中使用<code>action.payload</code>接收</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state,action</span>)&#123;</span><br><span class="line">  <span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;SET&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> action.<span class="property">payload</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">        &lt;button onClick=&#123;<span class="function">()=&gt;</span>&#123;<span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>:<span class="string">&#x27;SET&#x27;</span>,<span class="attr">payload</span>:<span class="number">100</span> &#125;)&#125;&#125;&gt;</span><br><span class="line">          <span class="title class_">Update</span> count to <span class="number">100</span></span><br><span class="line">        &lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pE8R458"><img src="https://s21.ax1x.com/2025/03/01/pE8R458.png" alt="pE8R458.png"></a></p>
<h4 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h4><p><strong>作用：</strong> 在组件每次重新渲染时<strong>缓存计算的结果</strong>，由此保证只有列表内的依赖项（即需要改变的状态变量）改变时再重新计算，从而避免不必要的组件重复渲染</p>
<p><strong>语法：</strong> <code>useMemo(()=&gt;&#123;&#125;,[state])</code></p>
<p><strong>备注：</strong> 消耗非常大的计算</p>
<h4 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h4><p><strong>作用：</strong> 在组件多次重新渲染的时候<em>缓存函数</em></p>
<p><strong>语法：</strong> <code>const changeHandler = useCallback((value) =&gt; console.log(),[])</code></p>
<p><strong>作用：</strong> 使用useCallback包裹函数后，函数可以保证在app<em>重新渲染时保持稳定</em></p>
<h3 id="自定义Hook函数"><a href="#自定义Hook函数" class="headerlink" title="自定义Hook函数"></a>自定义Hook函数</h3><h4 id="自定义Hook"><a href="#自定义Hook" class="headerlink" title="自定义Hook"></a>自定义Hook</h4><p><strong>概念:</strong> 自定义Hook是以<em>use</em> 打头的函数,通过自定义Hook函数可以实现逻辑的封装和复用</p>
<p><strong>思路:</strong></p>
<ol>
<li><p>声明一个以use打头的函数</p>
</li>
<li><p>在函数体内封装可复用的逻辑</p>
</li>
<li><p>把组件中用到的状态或者回调return出去</p>
</li>
<li><p>在哪个组件中要用到这个逻辑,就执行这个函数,解构出状态和相应的回调</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useToggle</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [value,setValue] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">toggle</span> = (<span class="params"></span>) =&gt; <span class="title function_">setValue</span>(!value)</span><br><span class="line">  <span class="comment">// 哪些状态和回调函数需要就在其他组件中使用return</span></span><br><span class="line">  <span class="keyword">return</span>&#123;</span><br><span class="line">    value,toggle</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;value,toggle&#125; = <span class="title function_">useToggle</span>()</span><br><span class="line"> <span class="keyword">return</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;value &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>This is div<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;toggle&#125;</span>&gt;</span>toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="React-Hooks函数使用规则"><a href="#React-Hooks函数使用规则" class="headerlink" title="React Hooks函数使用规则"></a>React Hooks函数使用规则</h4><ol>
<li><p>只能在组件中或者其他自定义Hook函数中调用</p>
</li>
<li><p>只能在组件的顶层调用,不能嵌套在if&#x2F;for&#x2F;其他函数等</p>
</li>
</ol>
<h2 id="React方法"><a href="#React方法" class="headerlink" title="React方法"></a>React方法</h2><h3 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h3><h4 id="React-memo-基本用法"><a href="#React-memo-基本用法" class="headerlink" title="React.memo-基本用法"></a>React.memo-基本用法</h4><p><strong>背景：</strong> React默认渲染机制，只要父组件重新渲染，子组件就会重新渲染</p>
<p><strong>作用：</strong> 经过memo函数包裹生产的缓存组件会在<strong>Props没有改变</strong>的情况下跳过渲染</p>
<p><strong>语法：</strong> <code>const MemoComponet = memo(function SomeComponent (props)&#123;...&#125;)</code></p>
<h4 id="React-memo-props的比较机制"><a href="#React-memo-props的比较机制" class="headerlink" title="React.memo-props的比较机制"></a>React.memo-props的比较机制</h4><p><strong>机制：</strong> React会对每一个prop使用<code>Object.is</code>比较新值和老值，返回true表示无变化</p>
<ul>
<li><p>props是简单类型<br><code>Object.is(3,3)=&gt;true</code><br>没变化</p>
</li>
<li><p>props是引用类型（数组&#x2F;对象）<br><code>Object.is([],[])=&gt;false</code><br>有变化，当父组件的函数重新执行时，实际上形成的新的数组引用</p>
</li>
</ul>
<p>为了保证引用稳定，可以使用useMemo组件渲染过程中缓存一个值</p>
<h3 id="React-forwardRef"><a href="#React-forwardRef" class="headerlink" title="React.forwardRef"></a>React.forwardRef</h3><h4 id="React-fowardRef基本用法"><a href="#React-fowardRef基本用法" class="headerlink" title="React.fowardRef基本用法"></a>React.fowardRef基本用法</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Input</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props,ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.组件中调用useReducer(reducer,0) =&gt;[state,dispatch]</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.调用dispatch(&#123;type:&#x27;INC&#x27;&#125;) =&gt;通知reducer产生新的状态来更新UI</span></span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">showRef</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(inputRef)  </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;showRef&#125;</span>&gt;</span>获取ref<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="React-useInperativeHandle"><a href="#React-useInperativeHandle" class="headerlink" title="React.useInperativeHandle"></a>React.useInperativeHandle</h4><p><strong>作用：</strong> 在子组件内部实现对ref方法的暴露，以便于调用</p>
<p><strong>语法：</strong> </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Input</span> = <span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props,ref</span>)=&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> inputref = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">focusHandler</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useImperativeHandle</span>(ref,<span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    focusHandler</span><br><span class="line">&#125;</span><br><span class="line">&#125; )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<h1 id="5-Redux"><a href="#5-Redux" class="headerlink" title="5.Redux"></a>5.Redux</h1><h2 id="Redux上手"><a href="#Redux上手" class="headerlink" title="Redux上手"></a>Redux上手</h2><h3 id="Redux快速体验"><a href="#Redux快速体验" class="headerlink" title="Redux快速体验"></a>Redux快速体验</h3><p>Redux 是 JavaScript 应用的状态容器，提供可预测的状态管理。</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pEAsEzq"><img src="https://s21.ax1x.com/2025/01/22/pEAsEzq.png" alt="pEAsEzq.png"></a></p>
<p><strong>使用步骤:</strong></p>
<ol>
<li><p>定义一个<em>reducer函数</em>(根据当前想要做的修改返回一个新的状态)</p>
</li>
<li><p>使用createStore方法传入<em>reducer函数</em> 生成一个<em>reducer实例</em></p>
</li>
<li><p>使用<em>store实例</em>的<strong>subscribe方法</strong> 订阅数据的变化(数据一旦变化,可以得到通知)</p>
</li>
<li><p>使用<em>store实例</em>的<strong>dispatch方法提交action对象</strong> 触发数据变化(告诉<em>reducer</em> 你如何修改数据)</p>
</li>
<li><p>使用store实例的<strong>getState方法</strong> 获取最新的状态数据更新到视图中</p>
</li>
</ol>
<h3 id="Redux与React配套"><a href="#Redux与React配套" class="headerlink" title="Redux与React配套"></a>Redux与React配套</h3><h4 id="配套工具"><a href="#配套工具" class="headerlink" title="配套工具:"></a>配套工具:</h4><p>1.Redux Tookit</p>
<p>2.react-redux</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install react-redux</span><br><span class="line"></span><br><span class="line">npm install redux-toolkit</span><br></pre></td></tr></table></figure>

<p><strong>store目录</strong></p>
<ol>
<li><p>通常集中状态管理部分单独创建一个<code>store</code>目录</p>
</li>
<li><p>应用通常会有很多个子store模块,所以会创建一个<code>modules</code>目录,在文件夹内编写业务分类的子store</p>
</li>
<li><p>store中的入口文件<code>index.js</code>的作用是组合modules中的所有子模块,并导出store</p>
</li>
</ol>
<h3 id="Redux-React-实现counter"><a href="#Redux-React-实现counter" class="headerlink" title="Redux+React &#x3D;&gt;实现counter"></a>Redux+React &#x3D;&gt;实现counter</h3><h4 id="整体路径"><a href="#整体路径" class="headerlink" title="整体路径"></a>整体路径</h4><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pEEuD1I"><img src="https://s21.ax1x.com/2025/01/24/pEEuD1I.png" alt="pEEuD1I.png"></a></p>
<h4 id="创建Redux的store对象"><a href="#创建Redux的store对象" class="headerlink" title="创建Redux的store对象"></a>创建Redux的store对象</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./modules/counterStore.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;createSlice&#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;counter&#x27;</span>,</span><br><span class="line">    <span class="comment">// 初始状态数据</span></span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 修改数据同步的方法</span></span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">increment</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>++</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">decrement</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            state.<span class="property">count</span>--</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 解构创建action对象的函数</span></span><br><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = counterStore.<span class="property">actions</span></span><br><span class="line"><span class="comment">// 获取reducer函数</span></span><br><span class="line"><span class="keyword">const</span> counterReducer = counterStore.<span class="property">reducer</span></span><br><span class="line"><span class="comment">// 导出action对象的函数和reducer函数</span></span><br><span class="line"><span class="keyword">export</span>&#123;increment,decrement&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterReducer</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer  <span class="keyword">from</span> <span class="string">&quot;./modules/counterStore&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;</span><br><span class="line">    <span class="attr">reducer</span>:&#123;</span><br><span class="line">        <span class="attr">counter</span>:counterReducer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>



<h4 id="为React注入store"><a href="#为React注入store" class="headerlink" title="为React注入store"></a>为React注入store</h4><p>react-redux负责把Redux和React链接起来,内置的Provider组件通过store参数把创建好的store实例注入到应用程序中,链接正式建立</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createRoot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.jsx&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Provider</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)).<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">    ,</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="React组件中使用store中的数据"><a href="#React组件中使用store中的数据" class="headerlink" title="React组件中使用store中的数据"></a>React组件中使用store中的数据</h4><p>在React组件中使用<code>store</code>中的数据,需要用到一个钩子函数<code>useSelector(state =&gt; state.Variable)</code></p>
<p><strong>作用:</strong> 将store中的数据映射到组件中</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useSelector &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;count&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counter</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;count&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em>注意:</em> 该例子中App.jsx中的counter实际定义在store中的入口,即<code>index.js</code></p>
<h4 id="React组件中修改store的数据"><a href="#React组件中修改store的数据" class="headerlink" title="React组件中修改store的数据"></a>React组件中修改store的数据</h4><p>React组件中修改store中的数据需要借助<code>useDispatch()</code>的hook函数</p>
<p><strong>作用:</strong> 生成提交<em>action对象</em>的函数</p>
<h3 id="Redux-React-提交action传参"><a href="#Redux-React-提交action传参" class="headerlink" title="Redux+React - 提交action传参"></a>Redux+React - 提交action传参</h3><h4 id="提交action传参实现需求"><a href="#提交action传参实现需求" class="headerlink" title="提交action传参实现需求"></a>提交action传参实现需求</h4><p>在reduers的同步修改方法中添加action对象参数,在调用<code>actionCreater</code>时传递参数,参数会被传递到<code>action</code>对象的<code>payload</code>属性上.</p>
<h3 id="Redux-React-异步状态管理"><a href="#Redux-React-异步状态管理" class="headerlink" title="Redux+React - 异步状态管理"></a>Redux+React - 异步状态管理</h3><h4 id="异步操作样板写法"><a href="#异步操作样板写法" class="headerlink" title="异步操作样板写法"></a>异步操作样板写法</h4><ol>
<li><p>创建store的写法保持不变,配置好同步修改状态的方法</p>
</li>
<li><p>单独封装一个函数,在函数内return一个新函数,在新函数中<br>2.1 封装异步请求获取数据<br>2.2 调用<strong>同步actionCreater</strong> 传入异步数据生成action对象,使用dispatch提交</p>
</li>
<li><p>组件中<code>dispatch</code>的写法不变</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//chaannelStore.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> channelStore =  <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;channel&#x27;</span>,</span><br><span class="line">    <span class="attr">initialState</span>:&#123;</span><br><span class="line">        <span class="attr">channelList</span>:[]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="title function_">setChannels</span>(<span class="params">state,action</span>)&#123;</span><br><span class="line">            state.<span class="property">channelList</span> = action.<span class="property">payload</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步请求</span></span><br><span class="line"><span class="keyword">const</span> &#123;setChannels&#125; = channelStore.<span class="property">actions</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fetchChannelList</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">async</span> (dispatch)=&gt;&#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://geek.itheima.net/v1_0/channels&#x27;</span>)</span><br><span class="line">        <span class="title function_">dispatch</span>(<span class="title function_">setChannels</span>(res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">channels</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;fetchChannelList,setChannels&#125;</span><br><span class="line"><span class="keyword">const</span> channelReducer = channelStore.<span class="property">reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> channelReducer</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer  <span class="keyword">from</span> <span class="string">&quot;./modules/counterStore&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> channelReducer <span class="keyword">from</span> <span class="string">&quot;./modules/channelStore&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;</span><br><span class="line">    <span class="attr">reducer</span>:&#123;</span><br><span class="line">        <span class="attr">counter</span>:counterReducer,</span><br><span class="line">        <span class="attr">channel</span>:channelReducer,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useDispatch, useSelector &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; decrement, increment,addToNum&#125; <span class="keyword">from</span> <span class="string">&quot;./store/modules/counterStore&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; fetchChannelList &#125; <span class="keyword">from</span> <span class="string">&quot;./store/modules/channelStore&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;count&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counter</span>)</span><br><span class="line">  <span class="keyword">const</span> &#123;channelList&#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">channel</span>)</span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>()</span><br><span class="line">  <span class="comment">// 使用useEffect触发异步</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(<span class="title function_">fetchChannelList</span>())</span><br><span class="line">  &#125;,[dispatch])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(decrement())&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;count&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(increment())&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(addToNum(20))&#125;&gt;+20<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;channelList.map(item=&gt; <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6-ReactRouter"><a href="#6-ReactRouter" class="headerlink" title="6.ReactRouter"></a>6.ReactRouter</h1><h2 id="ReactRouter应用"><a href="#ReactRouter应用" class="headerlink" title="ReactRouter应用"></a>ReactRouter应用</h2><h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><p><strong>前端路由</strong>:一个path对应一个组件component,当我们在浏览器中访问一个path时,path对应的组件会在页面中进行渲染</p>
<h4 id="创建路由开发环境"><a href="#创建路由开发环境" class="headerlink" title="创建路由开发环境"></a>创建路由开发环境</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br><span class="line">...</span><br><span class="line">npm i react<span class="literal">-router-dom</span></span><br><span class="line">...</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h4 id="基本实现"><a href="#基本实现" class="headerlink" title="基本实现"></a>基本实现</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调包</span></span><br><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter ,<span class="title class_">RouterProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建Router实例对象,配置路由对应关系</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是登录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/article&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章页<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 2.在渲染DOM中通过RouterProvider组件的router属性传入router对象</span></span><br><span class="line"><span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)).<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">RouterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="抽象路由模块"><a href="#抽象路由模块" class="headerlink" title="抽象路由模块"></a>抽象路由模块</h3><p><strong>在实际工程项目中的配置:</strong></p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pEelZ6J"><img src="https://s21.ax1x.com/2025/02/05/pEelZ6J.png" alt="ReactRouter配置"></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ./router/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&quot;../page/login&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Article</span> <span class="keyword">from</span> <span class="string">&quot;../page/article&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/article&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Article</span>/&gt;</span></span>,</span><br><span class="line">&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong> </p>
<p>在router注册组件时,<strong>组件名一定要首字母大写!!!</strong></p>
<h3 id="路由导航跳转"><a href="#路由导航跳转" class="headerlink" title="路由导航跳转"></a>路由导航跳转</h3><p><strong>概念:</strong> 路由系统中的多个路由之间需要进行<em>路由跳转</em>,并且在跳转的同时有可能需要传递参数进行通信.</p>
<h4 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h4><p>在模板中通过<code>&lt;Link to=&quot;&quot;/&gt;</code>组件描述要跳转的路由.</p>
<p>其中,<code>to=&#39;&#39;</code>属性指定要跳转的路由path,也可使用模板字符串拼接.</p>
<h4 id="命令式导航"><a href="#命令式导航" class="headerlink" title="命令式导航"></a>命令式导航</h4><p>在模板中通过<code>useNavigate()</code>的hooks函数绑定在需要的DOM事件上.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./page/login/index.jsx</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>,useNavigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Login</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 声明式写法 调用Link组件 编译为超链接 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/article&quot;</span>&gt;</span> 跳转到文章页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 命令式写法 调用useNavigate的hooks函数 绑定在DOM的事件上 */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> navigate(&#x27;/article&#x27;)&#125;&gt;跳转到文章页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Login</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="路由导航传参"><a href="#路由导航传参" class="headerlink" title="路由导航传参"></a>路由导航传参</h3><h4 id="searchParams传参"><a href="#searchParams传参" class="headerlink" title="searchParams传参"></a>searchParams传参</h4><p><strong>格式:</strong><code>/router?id=111&amp;name=222</code></p>
<p>取参函数:<code>useSearchParams()</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// login.jsx</span></span><br><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="title function_">navigate</span>(<span class="string">&#x27;/article?id=1001&amp;name=jack&#x27;</span>)&#125;&gt;searchParams传参&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//article.jsx</span></span><br><span class="line"><span class="keyword">const</span> [params] = <span class="title function_">useSearchParams</span>()</span><br><span class="line">    <span class="keyword">const</span> id = params.<span class="title function_">get</span>(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> name = params.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Params传参"><a href="#Params传参" class="headerlink" title="Params传参"></a>Params传参</h4><p><strong>格式:</strong><code>/router/:id/:name</code></p>
<p>取参函数:<code>useParams()</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ./router/index.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/article/:id/:name&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Article</span>/&gt;</span></span>,</span><br><span class="line">&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">//login.jsx</span></span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="title function_">navigate</span>(<span class="string">&#x27;/article/1001/jack&#x27;</span>)&#125;&gt;<span class="title class_">Params</span>传参&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//article.jsx</span></span><br><span class="line"><span class="keyword">const</span> params = <span class="title function_">useParams</span>()</span><br><span class="line"><span class="keyword">const</span> id = params.<span class="property">id</span></span><br><span class="line"><span class="keyword">const</span> name = params.<span class="property">name</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是文章&#123;id&#125;-&#123;name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong> 使用Params传参时,需要预先在路由文件下指定好匹配的对象名</p>
<h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><h4 id="什么是嵌套路由"><a href="#什么是嵌套路由" class="headerlink" title="什么是嵌套路由"></a>什么是嵌套路由</h4><p>在一级路由中嵌套其他路由,这种关系叫做嵌套路由.嵌套至一级路由内的路由称作二级路由</p>
<h4 id="嵌套路由配置"><a href="#嵌套路由配置" class="headerlink" title="嵌套路由配置"></a>嵌套路由配置</h4><p><strong>实现步骤</strong></p>
<ol>
<li><p>使用<code>children</code>属性</p>
</li>
<li><p>使用<code>&lt;Outlet/&gt;</code> 组件渲染二级路由渲染位置</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ./router/index.jsx</span></span><br><span class="line"><span class="comment">// react路由组件注册</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/article/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Article</span>/&gt;</span></span>,</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;board&#x27;</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Board</span>/&gt;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// ./page/Layout/index.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span>, <span class="title class_">Outlet</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Layout</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            瓦塔西一级路由Layout组件</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/board&quot;</span>&gt;</span>面板1<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*  二级路由出口     */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Outlet</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Layout</span></span><br></pre></td></tr></table></figure>



<h3 id="默认二级路由"><a href="#默认二级路由" class="headerlink" title="默认二级路由"></a>默认二级路由</h3><h4 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h4><p>在二级路由的位置去掉<code>path</code>,设置<code>index</code>属性为<code>true</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./router/index.jsx</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span>/&gt;</span></span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/article/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Article</span>/&gt;</span></span>,</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>:[</span><br><span class="line">        <span class="comment">// 设置为默认二级路由</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">index</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Board</span>/&gt;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>



<h3 id="404路由"><a href="#404路由" class="headerlink" title="404路由"></a>404路由</h3><p>场景:找不到对应path时,提示404页面</p>
<p><strong>实现步骤:</strong> </p>
<ol>
<li><p>准备NotFound组件</p>
</li>
<li><p>在路由表尾注册<code>*</code>为path的路由</p>
</li>
</ol>
<p>形如:</p>
<p>&#96;{</p>
<p>    path:’*’,</p>
<p>    element:<NotFound/></p>
<p>}&#96;</p>
<h3 id="两种路由模式"><a href="#两种路由模式" class="headerlink" title="两种路由模式"></a>两种路由模式</h3><p>主流框架常见的路由方式有两种,<strong>history模式和hash模式</strong>.</p>
<p>在React中分别由<code>createBrowerRoute</code>和<code>createHsahRouter</code>函数负责创建</p>
<table>
<thead>
<tr>
<th>路由模式</th>
<th>url表现</th>
<th>底层原理</th>
<th>是否需要后端支持</th>
</tr>
</thead>
<tbody><tr>
<td>history</td>
<td>url&#x2F;login</td>
<td>history对象+pushState事件</td>
<td>需要</td>
</tr>
<tr>
<td>hash</td>
<td>url&#x2F;#&#x2F;login</td>
<td>监听hashChange事件</td>
<td>不需要</td>
</tr>
</tbody></table>
<h1 id="7-项目实战-记账本"><a href="#7-项目实战-记账本" class="headerlink" title="7.项目实战-记账本"></a>7.项目实战-记账本</h1><h2 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h2><h3 id="项目依赖安装"><a href="#项目依赖安装" class="headerlink" title="项目依赖安装"></a>项目依赖安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br><span class="line">...</span><br><span class="line">npm i react-router-dom dayjs classnames antd-mobile axios</span><br></pre></td></tr></table></figure>

<h3 id="git提交"><a href="#git提交" class="headerlink" title="git提交"></a>git提交</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">// 仓库初始化</span><br><span class="line">git add .</span><br><span class="line">// 仓库更新</span><br><span class="line">git commit -m &quot;&quot;</span><br><span class="line">// 仓库提交 -m后跟提交内容的备注</span><br></pre></td></tr></table></figure>

<h3 id="Vite实现配置别名路径"><a href="#Vite实现配置别名路径" class="headerlink" title="Vite实现配置别名路径"></a>Vite实现配置别名路径</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vite.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">resolve</span>:&#123;</span><br><span class="line">    <span class="attr">alias</span>:&#123;</span><br><span class="line">      <span class="comment">// eslint-disable-next-line no-undef</span></span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="VS-Code配置别名路径高亮"><a href="#VS-Code配置别名路径高亮" class="headerlink" title="VS Code配置别名路径高亮"></a>VS Code配置别名路径高亮</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./jsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES6&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="comment">// 基础目录作为项目根目录, 这应该指向包含 `src` 目录的路径</span></span><br><span class="line">      <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// @ 作为 src目录别名</span></span><br><span class="line">        <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// VS Code 将 `@` 解析为 `src` 目录</span></span><br><span class="line"></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// &quot;...其他要排除的目录&quot;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="数据Mock"><a href="#数据Mock" class="headerlink" title="数据Mock"></a>数据Mock</h3><p>数据Mock是指通过模拟真实数据来测试系统功能，确保系统在无真实数据或无法获取真实数据时仍能正常运行。Mock数据通常用于开发、测试和演示，帮助开发者在早期阶段验证逻辑和接口。</p>
<h4 id="在前端开发中常见的数据Mock种类"><a href="#在前端开发中常见的数据Mock种类" class="headerlink" title="在前端开发中常见的数据Mock种类"></a>在前端开发中常见的数据Mock种类</h4><ol>
<li><p><strong>静态Mock数据</strong>：</p>
<ul>
<li><p>预先定义好的固定数据，通常存储在JSON、XML或CSV文件中。</p>
</li>
<li><p>适用于简单的测试场景。</p>
</li>
</ul>
</li>
<li><p><strong>动态Mock数据</strong>：</p>
<ul>
<li><p>在运行时生成的数据，模拟真实数据的动态变化。</p>
</li>
<li><p>适用于复杂场景，如模拟用户行为或实时数据流。</p>
</li>
</ul>
</li>
<li><p><strong>接口Mock</strong>：</p>
<ul>
<li><p>模拟API接口的响应，用于测试API调用。</p>
</li>
<li><p>适用于前后端分离开发或第三方API不可用时的测试。</p>
</li>
</ul>
</li>
</ol>
<h4 id="在前端开发中常见的Mock工具"><a href="#在前端开发中常见的Mock工具" class="headerlink" title="在前端开发中常见的Mock工具"></a>在前端开发中常见的Mock工具</h4><ol>
<li><p><strong>静态Mock数据工具</strong>：</p>
<ul>
<li><p><strong>JSON Server</strong>：基于JSON文件的REST API模拟工具，可以快速搭建一个本地的Mock服务器。</p>
</li>
<li><p><strong>Faker.js</strong>：生成虚假数据的JavaScript库，可以生成各种类型的虚假数据，如姓名、地址、电话号码等。</p>
</li>
</ul>
</li>
<li><p><strong>动态Mock数据工具</strong>：</p>
<ul>
<li><p><strong>Mock.js</strong>：生成随机数据的JavaScript库，支持生成各种类型的随机数据，并且可以定义数据模板。</p>
</li>
<li><p><strong>Faker</strong>（Python）：生成虚假数据的Python库，适用于需要在Python环境中生成Mock数据的场景。</p>
</li>
</ul>
</li>
<li><p><strong>接口Mock工具</strong>：</p>
<ul>
<li><p><strong>Postman Mock Server</strong>：Postman提供的API模拟服务，可以快速创建Mock服务器并定义API响应。</p>
</li>
<li><p><strong>WireMock</strong>：用于HTTP API的模拟工具，支持Java，适用于需要在Java环境中进行API Mock的场景。</p>
</li>
</ul>
</li>
</ol>
<h4 id="配置json-server"><a href="#配置json-server" class="headerlink" title="配置json-server"></a>配置json-server</h4><ol>
<li><p><strong>在项目中安装json-server</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D json-server</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备json文件</p>
</li>
<li><p>添加启动命令</p>
</li>
<li><p>访问接口并调试</p>
</li>
</ol>
<h3 id="整体路由设计"><a href="#整体路由设计" class="headerlink" title="整体路由设计"></a>整体路由设计</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pEnJsw4"><img src="https://s21.ax1x.com/2025/02/10/pEnJsw4.png" alt="pEnJsw4.png"></a></p>
<ol>
<li><p>2个一级路由(Layout&#x2F;New)</p>
</li>
<li><p>2个二级路由(Layout-month&#x2F;year)</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @/router/index.jsx</span></span><br><span class="line"><span class="comment">// 创建路由实例</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Layout/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Month</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Month/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">New</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/New/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Year</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Year/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>/&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;month&#x27;</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Month</span>/&gt;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>:<span class="string">&#x27;year&#x27;</span>,</span><br><span class="line">            <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">Year</span>/&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/new&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>:<span class="language-xml"><span class="tag">&lt;<span class="name">New</span>/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="antD-mobile主题定制"><a href="#antD-mobile主题定制" class="headerlink" title="antD-mobile主题定制"></a>antD-mobile主题定制</h3><p><strong>定制方案:</strong></p>
<ol>
<li><p>全局定制</p>
</li>
<li><p>局部定制</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;purple-theme&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">color</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>局部测试<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">color</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Zustand"><a href="#Zustand" class="headerlink" title="Zustand"></a>Zustand</h1><h2 id="Zustand快速上手"><a href="#Zustand快速上手" class="headerlink" title="Zustand快速上手"></a>Zustand快速上手</h2><h3 id="创建store"><a href="#创建store" class="headerlink" title="创建store"></a>创建store</h3><p><strong>语法：</strong> <code>const useStore = create((set)=&gt;&#123;return&#123;...&#125;)</code></p>
<h3 id="创建状态方法："><a href="#创建状态方法：" class="headerlink" title="创建状态方法："></a>创建状态方法：</h3><p><strong>语法：</strong><code>action:()=&gt;&#123;set((state)=&gt;(&#123;count:state.count + 1&#125;))&#125;</code></p>
<p><strong>注意：</strong></p>
<ol>
<li><p>函数参数必须返回一个对象 对象内部编写状态数据和方法</p>
</li>
<li><p>set是用来修改数据的专门方法，必须调用它来修改数据<br>语法1：参数是函数 需要使用老数据 需要用箭头函数的块内操作<br><code>set((state)=&gt;(&#123;count:state.count + 1&#125;))</code><br>语法2：参数直接是一个对象<br><code>set(&#123;count:100&#125;)</code></p>
</li>
</ol>
<h3 id="zustand-异步支持"><a href="#zustand-异步支持" class="headerlink" title="zustand-异步支持"></a>zustand-异步支持</h3><p>对于异步的支持不需要特殊的操作,直接在函数中编写异步逻辑,最后调用set方法传入新状态即可,记得解构并在主函数中使用useEffect调起该异步方法</p>
<h3 id="zustand-切片模式"><a href="#zustand-切片模式" class="headerlink" title="zustand-切片模式"></a>zustand-切片模式</h3><p>当单个store较大时,可以采用<strong>切片模式</strong>组合各个模块</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createCounterStore</span> = (<span class="params">set</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// 状态数据</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// 修改状态数据的方法</span></span><br><span class="line">    <span class="attr">inc</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createChannelStore</span> = (<span class="params">set</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">channelList</span>: [],</span><br><span class="line">    <span class="attr">fetchGetList</span>: <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="variable constant_">URL</span>)</span><br><span class="line">      <span class="keyword">const</span> jsonRes = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(jsonRes)</span><br><span class="line">      <span class="title function_">set</span>(&#123;</span><br><span class="line">        <span class="attr">channelList</span>: jsonRes.<span class="property">data</span>.<span class="property">channels</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">...a</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...<span class="title function_">createCounterStore</span>(...a),</span><br><span class="line">    ...<span class="title function_">createChannelStore</span>(...a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 2. 组件使用</span></span><br><span class="line">  <span class="keyword">const</span> &#123; count, inc, fetchGetList, channelList &#125; = <span class="title function_">useStore</span>()</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetchGetList</span>()</span><br><span class="line">  &#125;, [fetchGetList])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;inc&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;</span></span><br><span class="line"><span class="language-xml">          channelList.map(item =&gt; <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>)</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;create&#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span></span><br><span class="line"><span class="comment">// 创建store</span></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">0</span>,</span><br><span class="line">    <span class="attr">inc</span>:<span class="function">() =&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>)=&gt;</span>(&#123;</span><br><span class="line">        <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">      &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123;count,inc&#125; = <span class="title function_">useStore</span>()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">     This is app.</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;inc&#125;</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="React-TS"><a href="#React-TS" class="headerlink" title="React+TS"></a>React+TS</h1><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><h3 id="使用Vite创建TS的React项目"><a href="#使用Vite创建TS的React项目" class="headerlink" title="使用Vite创建TS的React项目"></a>使用Vite创建TS的React项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest my-vue-app -- --template react-ts</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h2 id="useState与TS"><a href="#useState与TS" class="headerlink" title="useState与TS"></a>useState与TS</h2><h3 id="useState-自动推导"><a href="#useState-自动推导" class="headerlink" title="useState-自动推导"></a>useState-自动推导</h3><p>通常React会根据传入的useState的默认值来自动推导类型，并不需要显式标注类型</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> [value,toogle] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeValue</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="title function_">toogle</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h3 id="useState-传递泛型参数"><a href="#useState-传递泛型参数" class="headerlink" title="useState- 传递泛型参数"></a>useState- 传递泛型参数</h3><p>useState本身是一个泛型函数，可以传入具体的自定义类型。</p>
<blockquote>
<p><strong>关于泛型的含义：</strong> <a target="_blank" rel="noopener" href="https://typescript.p6p.net/typescript-tutorial/generics.html">TypeScript 泛型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/typescript/ts-generics.html">TypeScript 泛型 | 菜鸟教程</a></p>
<p><strong>简单来说：</strong> 泛型（Generics）是一种编程语言特性，允许在定义函数、类、接口等时使用占位符来表示类型，而不是具体的类型。</p>
<p><strong>泛型函数:</strong></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用泛型函数</span></span><br><span class="line"><span class="keyword">let</span> result = identity&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出: Hello</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numberResult = identity&lt;<span class="built_in">number</span>&gt;(<span class="number">42</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numberResult); <span class="comment">// 输出: 42</span></span><br></pre></td></tr></table></figure>

<p><strong>泛型接口:</strong></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本语法</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Pair</span>&lt;T, U&gt; &#123;</span><br><span class="line">    <span class="attr">first</span>: T;</span><br><span class="line">    <span class="attr">second</span>: U;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用泛型接口</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">pair</span>: <span class="title class_">Pair</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="attr">first</span>: <span class="string">&quot;hello&quot;</span>, <span class="attr">second</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pair); <span class="comment">// 输出: &#123; first: &#x27;hello&#x27;, second: 42 &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>泛型类:</strong></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本语法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Box</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">value</span>: T;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">value</span>: T</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getValue</span>(): T &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用泛型类</span></span><br><span class="line"><span class="keyword">let</span> stringBox = <span class="keyword">new</span> <span class="title class_">Box</span>&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;TypeScript&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(stringBox.<span class="title function_">getValue</span>()); <span class="comment">// 输出: TypeScript</span></span><br></pre></td></tr></table></figure></blockquote>
<p><strong>说明:</strong></p>
<ol>
<li><p>限制useState函数参数的初始值类型必须满足<code>User | () =&gt; User</code></p>
</li>
<li><p>限制setUser函数的参数必须满足类型为<code>User | () =&gt; User | undefined</code></p>
</li>
<li><p>User状态数据必须具备User类型相关的类型提示</p>
</li>
<li><p>若不知道状态变量的初始值，可设置为null</p>
</li>
</ol>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="title class_">String</span></span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [user,setUser] = useState&lt;<span class="title class_">User</span>&gt;(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>:<span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>:<span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">const</span> [users,setUsers] = useState&lt;<span class="title class_">User</span>| <span class="literal">null</span>&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="props与TypeScript"><a href="#props与TypeScript" class="headerlink" title="props与TypeScript"></a>props与TypeScript</h2><h3 id="props-基础使用"><a href="#props-基础使用" class="headerlink" title="props - 基础使用"></a>props - 基础使用</h3><p>为组件prop添加类型，本质上是个函数的参数做<strong>类型注解</strong>，可以使用<strong>type</strong>对象类型或者<strong>interface</strong>接口来做注解</p>
<blockquote>
<p><strong>关于interface接口：</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/typescript/ts-interface.html">TypeScript 接口 | 菜鸟教程</a></p>
<p><a target="_blank" rel="noopener" href="https://typescript.p6p.net/typescript-tutorial/interface.html">TypeScript 的 interface 接口 </a></p>
<p>interface 是对象的模板，可以看作是一种类型约定，中文译为“接口”。使用了某个模板的对象，就拥有了指定的类型结构。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">lastName</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>关于type类型：</strong></p>
<p><a target="_blank" rel="noopener" href="https://typescript.p6p.net/typescript-tutorial/types.html">TypeScript 的类型系统</a></p>
<p><code>type</code>命令用来定义一个类型的别名。别名可以让类型的名字变得更有意义，也能增加代码的可读性，还可以使复杂类型用起来更方便，便于以后修改变量的类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Age</span> = <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="title class_">Age</span> = <span class="number">55</span>;</span><br></pre></td></tr></table></figure>

<p> 主要区别如下：</p>
<hr>
<h3 id="1-声明合并（Declaration-Merging）"><a href="#1-声明合并（Declaration-Merging）" class="headerlink" title="1. 声明合并（Declaration Merging）"></a>1. <strong>声明合并（Declaration Merging）</strong></h3><ul>
<li><p><strong><code>interface</code></strong>：支持声明合并。同一个名称的多个 <code>interface</code> 会自动合并。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123; <span class="attr">age</span>: <span class="built_in">number</span>; &#125;</span><br><span class="line"><span class="comment">// 合并为 &#123; name: string; age: number; &#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>type</code></strong>：不支持声明合并。同名 <code>type</code> 会报错。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;;  </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">User</span> = &#123; <span class="attr">age</span>: <span class="built_in">number</span>; &#125;; <span class="comment">// Error: Duplicate identifier &#x27;User&#x27;.</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="2-扩展方式"><a href="#2-扩展方式" class="headerlink" title="2. 扩展方式"></a>2. <strong>扩展方式</strong></h3><ul>
<li><p><strong><code>interface</code></strong>：用 <code>extends</code> 继承其他接口或对象类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123; <span class="attr">x</span>: <span class="built_in">number</span>; &#125;</span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123; <span class="attr">y</span>: <span class="built_in">string</span>; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>type</code></strong>：用 <code>&amp;</code> 交叉类型扩展。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> A = &#123; <span class="attr">x</span>: <span class="built_in">number</span>; &#125;;</span><br><span class="line"><span class="keyword">type</span> B = A &amp; &#123; <span class="attr">y</span>: <span class="built_in">string</span>; &#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="3-灵活性"><a href="#3-灵活性" class="headerlink" title="3. 灵活性"></a>3. <strong>灵活性</strong></h3><ul>
<li><p><strong><code>interface</code></strong>：只能定义对象类型（包括函数、类等）。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Func</span> &#123; (<span class="attr">x</span>: <span class="built_in">number</span>): <span class="built_in">void</span>; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>type</code></strong>：可以定义任意类型，包括原始类型、联合类型、元组等。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Name</span> = <span class="built_in">string</span>; <span class="comment">// 原始类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Value</span> = <span class="built_in">string</span> | <span class="built_in">number</span>; <span class="comment">// 联合类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Point</span> = [<span class="built_in">number</span>, <span class="built_in">number</span>]; <span class="comment">// 元组</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="4-性能与工具提示"><a href="#4-性能与工具提示" class="headerlink" title="4. 性能与工具提示"></a>4. <strong>性能与工具提示</strong></h3><ul>
<li><strong>工具提示（IntelliSense）</strong>：<br><code>interface</code> 在 VS Code 等工具中的提示更清晰（显示为 <code>interface</code>），而 <code>type</code> 会直接展开具体类型。</li>
<li><strong>性能</strong>：<br>对于复杂类型，<code>interface</code> 的检查可能略快（但实际差异很小）。</li>
</ul>
<hr>
<h3 id="5-类实现（implements）"><a href="#5-类实现（implements）" class="headerlink" title="5. 类实现（implements）"></a>5. <strong>类实现（<code>implements</code>）</strong></h3><ul>
<li><p><strong><code>interface</code></strong>：可以被类直接 <code>implements</code>。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IUser</span> &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">IUser</span> &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>type</code></strong>：如果 <code>type</code> 是对象类型，类也可以实现它。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TUser</span> = &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">TUser</span> &#123; <span class="attr">name</span>: <span class="built_in">string</span>; &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="何时用哪个？"><a href="#何时用哪个？" class="headerlink" title="何时用哪个？"></a>何时用哪个？</h3><ul>
<li><strong>用 <code>interface</code></strong>：  <ul>
<li>需要声明合并（如扩展第三方库类型）。  </li>
<li>定义对象类型且需要清晰的工具提示。  </li>
<li>面向对象的类结构（<code>implements</code>）。</li>
</ul>
</li>
<li><strong>用 <code>type</code></strong>：  <ul>
<li>需要联合类型、元组、映射类型等高级功能。  </li>
<li>定义非对象类型（如 <code>type Status = &quot;open&quot; | &quot;closed&quot;</code>）。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>两者功能高度重叠，但 <code>interface</code> 更适合对象类型的扩展，而 <code>type</code> 更灵活。大型项目推荐优先用 <code>interface</code>，需要复杂类型时再用 <code>type</code>。</p>
</blockquote>
<p><strong>注意：</strong> 对于children这种比较特殊的prop,若需要传入多种不同的数据类型，可以通过内置的<code>React.ReactNode</code>类型注解</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">type</span> <span class="title class_">Props</span> = &#123;</span><br><span class="line">    className :<span class="built_in">string</span></span><br><span class="line">    <span class="attr">children</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"><span class="attr">props</span>:<span class="title class_">Props</span></span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;className,children&#125; =  props</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is an app.</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">className</span>=<span class="string">&quot;Test&quot;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="props-组件props注解"><a href="#props-组件props注解" class="headerlink" title="props - 组件props注解"></a>props - 组件props注解</h3><p>组件经常执行类型为函数的prop实现父传子，这类prop重点在于函数参数类型的注解</p>
<p>一般绑定事件时，事件函数的命名规范是 <strong>“on”+驼峰命名法</strong></p>
<p>在调用组件时，将触发事件绑定到组件的props上时，可以选择内联或函数的方式绑定，若单独定义函数，须对单独匹配参数类型。</p>
<p><strong>注意：</strong></p>
<ol>
<li><p>在组件内部调用时需要遵守类型约束，参数传递需要满足要求</p>
</li>
<li><p>绑定prop时如果绑定内联函数，可以直接推断出数据类型，否则需要单独注解匹配参数类型。</p>
</li>
</ol>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123;</span><br><span class="line">  <span class="attr">className</span>?:<span class="built_in">string</span></span><br><span class="line">  <span class="attr">children</span>?: <span class="title class_">React</span>.<span class="property">ReactNode</span></span><br><span class="line">  <span class="attr">onGetMsg</span>?: <span class="function">(<span class="params"><span class="attr">msg</span>:<span class="built_in">string</span></span>)=&gt;</span><span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"><span class="attr">props</span>:<span class="title class_">Props</span></span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;className,children&#125; =  props</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"><span class="attr">props</span>:<span class="title class_">Props</span></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;onGetMsg&#125; = props</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">clickHandler</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    onGetMsg?.(<span class="string">&#x27;This is a msg&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;clickHandler&#125;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getMsgHandler</span> = (<span class="params"><span class="attr">msg</span>:<span class="built_in">string</span></span>) =&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is an app.</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">className</span>=<span class="string">&quot;Test&quot;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Son</span> <span class="attr">onGetMsg</span>=<span class="string">&#123;getMsgHandler&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="useRef与TypeScript"><a href="#useRef与TypeScript" class="headerlink" title="useRef与TypeScript"></a>useRef与TypeScript</h2><h3 id="useRef-获取DOM"><a href="#useRef-获取DOM" class="headerlink" title="useRef - 获取DOM"></a>useRef - 获取DOM</h3><p>获取dom的场景，可以直接把要获取的dom元素的类型当成泛型参数传递给useRef,可以推导出.current属性的类型</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> domRef = useRef&lt;<span class="title class_">HTMLInputElement</span>&gt;(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 可选链 前面值不为空(null/ undefined)执行链式调用</span></span><br><span class="line">    domRef.<span class="property">current</span>?.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;,[])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      This is an app.</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;domRef&#125;</span>&gt;</span>Input<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useRef-引用稳定的储存器"><a href="#useRef-引用稳定的储存器" class="headerlink" title="useRef - 引用稳定的储存器"></a>useRef - 引用稳定的储存器</h3><p>把useRef当成引用稳定的储存器使用的场景，可以通过泛型传入联合类型来做。</p>
<h1 id="React理论和设计思想"><a href="#React理论和设计思想" class="headerlink" title="React理论和设计思想"></a>React理论和设计思想</h1><h2 id="Babel-SWC"><a href="#Babel-SWC" class="headerlink" title="Babel &amp; SWC"></a>Babel &amp; SWC</h2><h3 id="使用babel编译JS-JSX代码"><a href="#使用babel编译JS-JSX代码" class="headerlink" title="使用babel编译JS JSX代码"></a>使用babel编译JS JSX代码</h3><p>Babel 是一个 JavaScript 编译器,提供了JavaScript的编译过程，能够将源代码转换为目标代码。</p>
<p>对于ES6+的新特性，可通过corejs引入的方式实现向下兼容</p>
<p>AST -&gt; Transform -&gt; Generate</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="comment">//语法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = (<span class="params">params = <span class="number">2</span></span>) =&gt; <span class="number">1</span> + params;</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> c = [...b, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Babel</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Babel</span>()</span><br><span class="line"><span class="comment">//API</span></span><br><span class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>].<span class="title function_">filter</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> y = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, &#123; <span class="attr">name</span>: <span class="number">1</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="comment">// 记得设置package.json的type为module</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Babel</span> <span class="keyword">from</span> <span class="string">&#x27;@babel/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> presetEnv <span class="keyword">from</span> <span class="string">&#x27;@babel/preset-env&#x27;</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;node:fs&#x27;</span></span><br><span class="line"><span class="keyword">const</span> file = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./test.js&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> result = <span class="title class_">Babel</span>.<span class="title function_">transform</span>(file, &#123;</span><br><span class="line">    <span class="attr">presets</span>: [presetEnv]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">code</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="使用swc编译JS-JSX"><a href="#使用swc编译JS-JSX" class="headerlink" title="使用swc编译JS JSX"></a>使用swc编译JS JSX</h3><p>SWC 既可用于编译，也可用于打包。对于编译，它使用现代 JavaScript 功能获取 JavaScript &#x2F; TypeScript 文件并输出所有主流浏览器支持的有效代码。</p>
<p><strong><code>SWC在单线程上比 Babel 快 20 倍，在四核上快 70 倍。</code></strong></p>
<p>简单点来说swc实现了和babel一样的功能，但是它比babel快。</p>
<p><em>唉唉，编程原神<code>rust</code>发力了</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> swc <span class="keyword">from</span> <span class="string">&#x27;@swc/core&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = swc.<span class="title function_">transformFileSync</span>(<span class="string">&#x27;./test.js&#x27;</span>, &#123;</span><br><span class="line">   <span class="attr">jsc</span>: &#123;</span><br><span class="line">       <span class="attr">target</span>: <span class="string">&quot;es5&quot;</span>, <span class="comment">//代码转换es5</span></span><br><span class="line">       <span class="attr">parser</span>: &#123;</span><br><span class="line">           <span class="attr">syntax</span>: <span class="string">&#x27;ecmascript&#x27;</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">code</span>)</span><br></pre></td></tr></table></figure>

<p><strong>swc转JSX</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> swc <span class="keyword">from</span> <span class="string">&#x27;@swc/core&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>()</span><br><span class="line"><span class="keyword">const</span> result = swc.<span class="title function_">transformFileSync</span>(<span class="string">&#x27;./test.jsx&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">jsc</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;es5&quot;</span>, <span class="comment">//代码转换es5</span></span><br><span class="line">        <span class="attr">parser</span>: &#123;</span><br><span class="line">            <span class="attr">syntax</span>: <span class="string">&#x27;ecmascript&#x27;</span>,</span><br><span class="line">            <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">transform</span>:&#123;</span><br><span class="line">            <span class="attr">react</span>: &#123;</span><br><span class="line">                <span class="attr">runtime</span>: <span class="string">&#x27;automatic&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">code</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>()</span><br></pre></td></tr></table></figure>

<h2 id="VDOM-虚拟DOM"><a href="#VDOM-虚拟DOM" class="headerlink" title="VDOM (虚拟DOM)"></a>VDOM (虚拟DOM)</h2><p>Virtual DOM 就是用JavaScript对象去描述一个DOM结构，虚拟DOM不是直接操作浏览器的真实DOM，而是首先对 UI 的更新在虚拟 DOM 中进行，再将变更高效地同步到真实 DOM 中。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/06/React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="cm95n5bdc0005ustn3vhw8rs8" data-title="React学习笔记" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/04/05/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1%E6%96%87%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          前端八股文学习笔记
        
      </div>
    </a>
  
  
    <a href="/2024/10/27/Express-%E8%BD%BB%E9%87%8F%E5%8C%96%E7%9A%84Web%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Express:轻量化的Web开发框架</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">April 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/04/06/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2025/04/05/%E5%89%8D%E7%AB%AF%E5%85%AB%E8%82%A1%E6%96%87%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">前端八股文学习笔记</a>
          </li>
        
          <li>
            <a href="/2025/02/06/React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">React学习笔记</a>
          </li>
        
          <li>
            <a href="/2024/10/27/Express-%E8%BD%BB%E9%87%8F%E5%8C%96%E7%9A%84Web%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/">Express:轻量化的Web开发框架</a>
          </li>
        
          <li>
            <a href="/2024/10/06/Vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Vue学习笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>